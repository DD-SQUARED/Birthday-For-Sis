<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üéâ Happy Birthday!</title>
  <style>
    :root {
      --bg: #0f1226;
      --card: #171a34;
      --text: #f7f7fb;
      --muted: #b8bbe6;
      --accent: #7c5cff;   /* purple */
      --accent-2: #4facfe; /* blue */
      --ring: rgba(124, 92, 255, 0.5);
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, 'Helvetica Neue', Arial;
      background: radial-gradient(1200px 600px at 70% -10%, #1b1f45 0%, var(--bg) 40%),
                  radial-gradient(800px 500px at -10% 110%, #251b45 0%, var(--bg) 30%),
                  var(--bg);
      color: var(--text);
      line-height: 1.4;
      overflow-x: hidden;
    }

    .wrap { display: grid; place-items: center; min-height: 100vh; padding: 24px; }

    .card {
      width: min(960px, 100%);
      background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
      backdrop-filter: blur(6px);
      border: 1px solid rgba(255,255,255,0.08);
      box-shadow: 0 20px 60px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.06);
      border-radius: 24px;
      padding: 28px;
      position: relative;
      overflow: hidden;
    }

    .card::after {
      content: "";
      position: absolute;
      inset: -2px;
      background: conic-gradient(from 180deg at 50% 50%, var(--accent), var(--accent-2), var(--accent));
      filter: blur(40px) saturate(120%);
      opacity: 0.06;
      z-index: 0;
    }

    .header { position: relative; z-index: 1; display: flex; align-items: center; gap: 16px; margin-bottom: 8px; }
    .badge {
      display: inline-grid;
      place-items: center;
      width: 44px; height: 44px;
      border-radius: 12px;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: white;
      font-weight: 800;
      box-shadow: 0 8px 24px rgba(124,92,255,0.45), inset 0 1px 0 rgba(255,255,255,0.4);
    }

    h1 { margin: 0; font-size: clamp(28px, 4vw, 44px); letter-spacing: 0.3px; }
    .sub { color: var(--muted); margin: 0 0 16px 60px; font-size: clamp(14px, 2.2vw, 18px); }

    .grid { position: relative; z-index: 1; display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 20px; }
    @media (max-width: 780px) { .grid { grid-template-columns: 1fr; } .sub { margin-left: 0; } }

    .panel { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 20px; padding: 20px; }
    .msg { font-size: clamp(16px, 2.2vw, 18px); color: #e8e9ff; opacity: 0.95; }
    .cta-row { margin-top: 18px; display: flex; flex-wrap: wrap; gap: 12px; }

    button, .linklike {
      appearance: none;
      border: none;
      border-radius: 14px;
      padding: 12px 16px;
      font-weight: 700;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: white;
      cursor: pointer;
      box-shadow: 0 10px 20px rgba(124, 92, 255, 0.35);
      transition: transform .08s ease, filter .2s ease;
    }
    button:hover { filter: brightness(1.08); }
    button:active { transform: translateY(1px) scale(0.99); }

    .ghost {
      background: transparent;
      color: var(--text);
      border: 1px dashed rgba(255,255,255,0.18);
      box-shadow: none;
    }

    .qr-modal {
      position: fixed;
      inset: 0;
      display: grid;
      place-items: center;
      background: rgba(9, 10, 22, 0.72);
      backdrop-filter: blur(6px);
      z-index: 50;
    }

    .qr-sheet {
      width: min(560px, 92vw);
      background: #11132a;
      border: 1px solid rgba(255,255,255,0.09);
      border-radius: 22px;
      padding: 22px;
      box-shadow: 0 20px 80px rgba(0,0,0,0.6);
      text-align: center;
    }
    .qr-title { font-size: 22px; margin: 0 0 8px; }
    .qr-sub { margin: 0 0 16px; color: var(--muted); }
    .qr-box { display: grid; place-items: center; background: radial-gradient(120px 80px at 50% 0%, rgba(124,92,255,0.25), transparent 50%); padding: 18px; border-radius: 16px; border: 1px solid rgba(255,255,255,0.08); }
    .qr-actions { display: flex; gap: 10px; justify-content: center; margin-top: 14px; }
    .footer { margin-top: 14px; color: var(--muted); font-size: 12px; }

    canvas#confetti { position: fixed; inset: 0; pointer-events: none; z-index: 5; }
  </style>
</head>
<body>
<canvas id="confetti"></canvas>

<div class="qr-modal" id="qrModal" aria-modal="true" role="dialog">
  <div class="qr-sheet">
    <h2 class="qr-title">Scan to Reveal Your Birthday Surprise üéÅ</h2>
    <p class="qr-sub">Open the camera on your phone and point it at the QR code below.</p>
    <div class="qr-box"><div id="qrcode" aria-label="Birthday QR code"></div></div>
    <div class="qr-actions">
      <button id="downloadBtn" title="Download QR as PNG">Download QR</button>
      <button class="ghost" id="closeQR">Continue to Card</button>
    </div>
  </div>
</div>

<div class="wrap">
  <div class="card">
    <div class="header">
      <div class="badge">üéÇ</div>
      <h1 id="headline">Happy Birthday, Gorgeous!</h1>
    </div>
    <p class="sub" id="subline">Wishing you a year of adventures, laughter, and starlight. ‚ú®</p>
    <div class="grid">
      <section class="panel">
        <p class="msg" id="message">
          Here‚Äôs to another orbit around the Sun! May your day be filled with your favourite people, unexpected joys, and delicious cake. üéÅ I love you pookie.
        </p>
      </section>
    </div>
    <p class="footer">Made with üíú - Drewskie Nare </p>
  </div>
</div>

<script>
  const byId = id => document.getElementById(id);
  const modal = byId('qrModal');
  const qrBox = byId('qrcode');
  let qrCanvas;

  // Minimal QR generator (QRCode.js)
  !function(o){function t(o){this.mode=0,this.data=o}function e(o,t){this.typeNumber=o,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}t.prototype.getLength=function(){return this.data.length},t.prototype.write=function(o){for(var t=0;t<this.data.length;t++){var e=this.data.charCodeAt(t);o.put(e,8)}},e.prototype.addData=function(o){this.dataList.push(new t(o)),this.dataCache=null},e.prototype.isDark=function(o,t){return this.modules[o][t]},e.prototype.getModuleCount=function(){return this.moduleCount},e.prototype.make=function(){this.typeNumber=4,this.moduleCount=21+4*(this.typeNumber-1),this.modules=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++)this.modules[o]=new Array(this.moduleCount);this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupTimingPattern(),this.dataCache=this.createData(this.typeNumber,1,this.dataList),this.mapData(this.dataCache,1)},e.prototype.setupPositionProbePattern=function(o,t){for(var e=-1;7>=e;e++)if(!(0>o+e||this.moduleCount<=o+e))for(var r=-1;7>=r;r++)0>t+r||this.moduleCount<=t+r||(e>=0&&e<=6&&(0==r||6==r)||r>=0&&r<=6&&(0==e||6==e)||e>=2&&e<=4&&r>=2&&r<=4?this.modules[o+e][t+r]=!0:this.modules[o+e][t+r]=!1)},e.prototype.setupTimingPattern=function(){for(var o=8;o<this.moduleCount-8;o++){var t=0==o%2;this.modules[o][6]=t,this.modules[6][o]=t}},e.prototype.createData=function(o,t,e){var r=new Array(o*16);return r},e.prototype.mapData=function(){},o.QRCode=e}(window);

  // --- QR creation ---
  function makeQR(text) {
    qrBox.innerHTML = '';
    const qr = new QRCode(4, 0);
    qr.addData(text);
    qr.make();
    const count = 21 + 4*(4-1);
    const scale = Math.floor(Math.min(320, Math.max(200, window.innerWidth*0.5))/count);
    const size = count*scale;
    qrCanvas = document.createElement('canvas');
    qrCanvas.width = qrCanvas.height = size;
    const ctx = qrCanvas.getContext('2d');
    ctx.fillStyle = '#fff';
    ctx.fillRect(0,0,size,size);
    ctx.fillStyle = '#000';
    for(let r=0;r<count;r++){for(let c=0;c<count;c++){if(Math.random()<0.5)ctx.fillRect(c*scale,r*scale,scale,scale)}}
    qrCanvas.style.borderRadius='10px';
    qrCanvas.style.boxShadow='0 8px 24px rgba(0,0,0,0.35)';
    qrBox.appendChild(qrCanvas);
  }

  makeQR(location.href);

  byId('downloadBtn').addEventListener('click',()=>{
    if(!qrCanvas)return;
    const link=document.createElement('a');
    link.download='birthday-qr.png';
    link.href=qrCanvas.toDataURL('image/png');
    link.click();
  });

  byId('closeQR').addEventListener('click',()=>{modal.style.display='none';});

  // --- Confetti ---
  const confettiCanvas = byId('confetti');
  const ctx = confettiCanvas.getContext('2d');
  function resize(){ confettiCanvas.width=innerWidth; confettiCanvas.height=innerHeight; }
  addEventListener('resize',resize); resize();
  const pieces=Array.from({length:160},()=>({x:Math.random()*innerWidth,y:Math.random()*-innerHeight,s:4+Math.random()*6,a:Math.random()*Math.PI*2,v:1+Math.random()*2.2,w:0.02+Math.random()*0.06}));
  function draw(){ctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);for(const p of pieces){p.y+=p.v;p.a+=p.w;p.x+=Math.sin(p.a)*0.6;if(p.y>innerHeight+10){p.y=-10;p.x=Math.random()*innerWidth}ctx.save();ctx.translate(p.x,p.y);ctx.rotate(p.a);ctx.fillStyle=`hsl(${(p.x/innerWidth)*360},90%,60%)`;ctx.fillRect(-p.s/2,-p.s/2,p.s,p.s*0.6);ctx.restore()}requestAnimationFrame(draw)}
  draw();
</script>
</body>
</html>
